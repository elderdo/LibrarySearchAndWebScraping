vxi='tmavSmGZRES0yIcj2kKTpA';
vxsurvey={"theme":"{\r\n\t\u0022li_bg\u0022: \u0022#ccc\u0022,\r\n\t\u0022com_bg\u0022: \u0022#ccc\u0022,\r\n\t\u0022bghov\u0022: \u0022#fff\u0022,\r\n\t\u0022bor_bg\u0022: \u0022#999\u0022,\r\n\t\u0022bg\u0022: \u0022#eee\u0022,\r\n\t\u0022text\u0022: \u0022#666\u0022,\r\n\t\u0022hr_bg\u0022: \u0022#ccc\u0022,\r\n\t\u0022hr_bor_top\u0022: \u0022#ccc\u0022,\r\n\t\u0022hr_bor_bot\u0022: \u0022#fff\u0022,\r\n\t\u0022#ifv ul li\u0022 : {\r\n\t\t\u0022background-color\u0022 : \u0022#ccc\u0022\r\n\t},\r\n\t\u0022#ifv .bghov:hover\u0022 : {\r\n\t\t\u0022background-color\u0022 : \u0022#fff\u0022\r\n\t},\r\n\t\u0022#ifv\u0022 : {\r\n\t\t\u0022border-color\u0022 : \u0022#999\u0022,\r\n\t\t\u0022background-color\u0022 : \u0022#eee\u0022,\r\n\t\t\u0022color\u0022 : \u0022#666\u0022\r\n\t},\r\n\t\u0022hr\u0022 : {\r\n\t\t\u0022background-color\u0022 : \u0022#ccc\u0022,\r\n\t\t\u0022border-color\u0022 : \u0022#ccc transparent #fff\u0022\r\n\t},\r\n\t\u0022.component\u0022 : {\r\n\t\t\u0022background-color\u0022 : \u0022#ccc\u0022\r\n\t},\r\n\t\u0022.vxsub\u0022 : {\r\n\t\t\u0022background-color\u0022 : \u0022#fff\u0022\r\n\t}\r\n}","submit_text":"Send","uuid64":"tmavSmGZRES0yIcj2kKTpA","on_exit":"0","include_mobile":"1","reg_exp":"^https?:\/\/((www|overdrive|webpac|encore)\\.slcl\\.org|mo\\.evanced\\.info\\\/slcl\\\/lib\\\/(eventcalendar|roomrequest)\\.asp)","pages":"2","percent":"3.00","duration":"960","wait":"10","sbetween":"960","inspectlet_wid":"","intro":"Please take this short (90 second) survey to help us improve the website experience.","inc_1st_quest":"1","thank_you":"**Thank you!** \u003Cbr\/\u003E\r\nWe appreciate your feedback and support!\u003Cbr\/\u003E\r\n","components":[{"cid":"1","pid":"0","uuid":"f9a318080eb02d1e69400414b362a136","name":"How likely are you to recommend the St. Louis County Library website to others?","type":"grid","extra":{"description":"VXNPS","private":0,"wrapper_classes":"","sticky":1,"options":"0|0 = Not Likely\n1|1\n2|2\n3|3\n4|4\n5|5\n6|6\n7|7\n8|8\n9|9\n10|10 = Very Likely\n","questions":"0|0 = Not Likely; 10 = Very Likely\n"},"required":"0","weight":"0"},{"cid":"2","pid":"0","uuid":"58fc1aa8c8748669564edb02cd689743","name":"Which of the following best describes the primary purpose of your visit? ","type":"select","extra":{"description":"VXPOV","title_display":"before","private":0,"wrapper_classes":"","css_classes":"","aslist":0,"optrand":1,"other_option":1,"other_text":"Other, please specify","items":"vx_events|Get information about events, programs or classes\nvx_research|Research a topic\nvx_downloads|Download eBooks or media\nvx_catalog|Browse the library catalog\nvx_account renew hold|Check your account, renew items, or place holds\nvx_info|Find information about the library (hours, locations)\nvx_genealogy|Genealogy research\nvx_foundation|Seeking information on the Library Foundation\n","multiple":0,"custom_keys":0},"required":"0","weight":"1"},{"cid":"5","pid":"0","uuid":"55e10fd70f690a1029af552fb2826f7e","name":"Were you able to complete the purpose of your visit today? ","type":"select","extra":{"description":"VXCOMP","title_display":"before","private":0,"wrapper_classes":"","css_classes":"","aslist":0,"other_option":0,"items":"yes|Yes\nno|No\n","multiple":0,"custom_keys":0},"required":"0","weight":"2"},{"cid":"8","pid":"0","uuid":"a063f59af084956cb80e56af495efdc7","name":"What do you like most about the SLCL website? ","type":"textarea","extra":{"description":"VXMOST","title_display":"before","private":0,"wrapper_classes":"","css_classes":"","cols":"60","rows":"3"},"required":"0","weight":"3"},{"cid":"7","pid":"0","uuid":"0d44cc9a739fd48be5f179a05e0f331e","name":"Please tell us why you were not able to complete the purpose of your visit today. ","type":"textarea","extra":{"description":"VXFAIL","title_display":"before","private":0,"wrapper_classes":"","css_classes":"","cols":"60","rows":"3"},"required":"0","weight":"4"},{"cid":"20","pid":"0","uuid":"6567f6906ef2c30331567010837d8154","name":"Which of the following best describes your relationship with SLCL? ","type":"select","extra":{"description":"VXREL","title_display":"before","private":0,"wrapper_classes":"","css_classes":"","aslist":0,"optrand":1,"other_option":1,"other_text":"Other, please specify","items":"vx_adultprogram|An adult seeking interesting and useful programs\nvx_computer|A patron using a public computer in a library branch\nvx_children|Interested in children\u2019s books or events\nvx_student|A student\nvx_browser|Looking for books or other materials\nvx_job|A job seeker interested in related services offered by the library\n","multiple":0,"custom_keys":0},"required":"0","weight":"5"},{"cid":"24","pid":"0","uuid":"699e414b64c33bb9b3ed4da7f3cc306b","name":"How do you usually find out about SLCL events and programs?","type":"select","extra":{"title_display":"before","private":0,"wrapper_classes":"","css_classes":"","aslist":0,"optrand":1,"other_option":1,"items":"vx_promotion|Promotion in the library\nvx_website|SLCL\u2019s website\nvx_facebook|Facebook\nvx_twitter|Twitter\nvx_mouth|Word of mouth\nvx_staff|From SLCL staff\nvx_mail|Email \/ eNewsletter\n","multiple":0,"custom_keys":0,"other_text":"Other...","description":"","options_source":"","analysis":true},"required":"0","weight":"6"},{"cid":"18","pid":"0","uuid":"757ca505cec88a0f108367af82fab55a","name":"What other programs or services you\u0027d like to see offered at SLCL?","type":"textarea","extra":{"title_display":"before","private":0,"wrapper_classes":"","css_classes":"","cols":"60","rows":"3","resizable":1,"disabled":0,"description":"","placeholder":"","attributes":[],"analysis":false},"required":"0","weight":"7"},{"cid":"22","pid":"0","uuid":"0b4df6cdb4b83f6b7f92346b777d271f","name":"Which of the following best describes how often you visit this website?","type":"select","extra":{"description":"VXFREQ","title_display":"before","private":0,"wrapper_classes":"","css_classes":"","aslist":0,"other_option":0,"items":"daily|Several visits a day\nweekly|Several visits a week\nmonthly|Several visits a month\nannually|Several visits a year\nfirst|This is my first visit\nunsure|I don\u0027t know or I\u0027m unsure\n","multiple":0,"custom_keys":0},"required":"0","weight":"8"},{"cid":"16","pid":"0","uuid":"0eaf1e5745971d5575690a972a44f737","name":"What is your age group? ","type":"select","extra":{"description":"VXAGE","title_display":"before","private":0,"wrapper_classes":"","css_classes":"","aslist":0,"other_option":0,"items":"-18|Under 18\n18-24|18-24\n25-34|25-34\n35-44|35-44\n45-54|45-54\n55-64|55-64\n65|65+\nnone|I prefer not to answer\n","multiple":0,"custom_keys":0},"required":"0","weight":"9"}],"conditionals":{"1":{"rgid":"1","andor":"and","action":"show","target_type":"component","target":"8","weight":"-2","rules":[{"rgid":"1","rid":"0","source_type":"component","source":"5","operator":"equal","value":"yes"}]},"2":{"rgid":"2","andor":"and","action":"show","target_type":"component","target":"7","weight":"-2","rules":[{"rgid":"2","rid":"0","source_type":"component","source":"5","operator":"equal","value":"no"}]}}};
var vx={version:2015041001,init:function(){return this.is_prod=!document.location.hostname.match(/.dev$/),this.vju=this.is_prod?"d2rnkf2kqy5m6h.cloudfront.net":"j.ifvox.dev",this.vsu=this.is_prod?"s.ifvox.com":"s.ifvox.dev:8888",this.vtu=this.is_prod?"t.ifvox.com":"t.ifvox.dev:8886",this.hexList="0123456789abcdef",this.b64list="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",this.lilEnd=this.util.lilEnd(),this.subArr="&#10140;",this},polyfill:function(a){"undefined"==typeof Object.keys&&(Object.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}),"undefined"==typeof JSON?vx.script.get("//"+this.vju+"/json2.min.js",a):"function"==typeof a&&a()},run:function(){vx.polyfill(function(){"IF_WEBSITE_CONTACTFORM"!=vxsurvey.uuid64&&vx.ui.iPhone6Plus()||(vx.util.hotfix(),vx.uid=vx.id.val(),vx.mobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(navigator.userAgent),vx.mobile&&"1"!=vxsurvey.include_mobile||(vx.rec(),vx.script.jq("//code.jquery.com/jquery-1.11.2.min.js",function(a){vx.util.log((a?"Already have":"Just injected")+" jQuery version: "+vx.$().jquery+" vxi: "+vxi),vx.ui.init()})))})},id:{s4:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},guid:function(){return vx.id.s4()+vx.id.s4()+"-"+vx.id.s4()+"-"+vx.id.s4()+"-"+vx.id.s4()+"-"+vx.id.s4()+vx.id.s4()+vx.id.s4()},val:function(){var a=vx.cookie.rc("vxu");return null===a&&(a=vx.util.uu2b64(vx.id.guid()),vx.cookie.cc("vxu",a,365)),a}},cookie:{cc:function(a,b,c,d){var e,f="";c&&(e=new Date,e.setTime(e.getTime()+24*c*60*60*1e3),f=";expires="+e.toGMTString()),void 0===d&&(d="."+vx.util.domain(window.location.host)),document.cookie=a+"="+b+f+";domain="+d+";path=/"},rc:function(a){var b,c,d=a+"=",e=document.cookie.split(";");for(b=0;b<e.length;b++){for(c=e[b];" "==c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(d))return c.substring(d.length,c.length)}return null},ec:function(a,b){vx.cookie.cc(a,"",-1,b)},all:function(a){var b={};if(document.cookie&&""!=document.cookie){var c,d,e=document.cookie.split(/;\s*/);void 0!==a&&(d=new RegExp("^"+a));for(var f=0;f<e.length;f++)c=e[f].split("="),(void 0===d||c[0].match(d))&&(b[decodeURIComponent(c[0])]=decodeURIComponent(c[1]))}return b}},script:{get:function(a,b){var c=document.createElement("script"),d=document.getElementsByTagName("head")[0],e=!1;c.src=a,c.onload=c.onreadystatechange=function(){e||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(e=!0,"function"==typeof b&&b(),c.onload=c.onreadystatechange=null,d.removeChild(c))},d.appendChild(c)},jq:function(a,b){"undefined"==typeof jQuery?vx.script.get(a,function(){"undefined"!=typeof jQuery&&(vx.$=jQuery,b(void 0))}):(vx.$=jQuery,b(!0))}},util:{rndArr:function(a){for(var b=0;b<a.length-1;b++){var c=b+Math.floor(Math.random()*(a.length-b)),d=a[c];a[c]=a[b],a[b]=d}return a},optObj:function(a,b){var c,d,e=a.match(/^([^\|]+)\|([^\n]+)$/gm),f={};for("1"==b&&(e=vx.util.rndArr(e)),d=0;d<e.length;d++)c=e[d].split("|"),f["_"+c[0]]=c[1];return f},rndRng:function(a,b,c){return parseFloat((Math.random()*(b-a)+a).toFixed("undefined"==typeof c?0:c))},lilEnd:function(){if("undefined"==typeof ArrayBuffer)return!0;var a=new ArrayBuffer(4),b=new Uint8Array(a),c=new Uint32Array(a);if(b[0]=161,b[1]=178,b[2]=195,b[3]=212,3569595041==c[0])return!0;if(2712847316==c[0])return!1;throw new Error("Cannot determine endian")},uu2b64:function(a){var b,c,d,e="",f=0,g=a.replace(/[^0-9a-f]/gi,"").toLowerCase();if(32!=g.length)return"";for(vx.lilEnd&&(g=g.slice(6,8)+g.slice(4,6)+g.slice(2,4)+g.slice(0,2)+g.slice(10,12)+g.slice(8,10)+g.slice(14,16)+g.slice(12,14)+g.slice(16)),g+="0";33>f;)b=vx.hexList.indexOf(g.charAt(f++))<<8|vx.hexList.indexOf(g.charAt(f++))<<4|vx.hexList.indexOf(g.charAt(f++)),c=b>>6,d=63&b,e+=vx.b64list.charAt(c)+vx.b64list.charAt(d);return e},domain:function(a){var b=a.split(".").reverse();return b.length>=3&&b[1].match(/^(com|edu|gov|net|mil|org|nom|co|name|info|biz)$/i)?b[2]+"."+b[1]+"."+b[0]:b[1]+"."+b[0]},hotfix:function(){var a,b=parseInt(vx.cookie.rc("vxv"))||0;if(2015032302>b){a=vx.cookie.all("vx");for(prop in a)document.cookie=prop+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/",document.cookie=prop+"=;domain="+window.location.host+";expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/",document.cookie=prop+"=;domain=."+vx.util.domain(window.location.host)+";expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/";vx.cookie.cc("vxv",vx.version,365)}},encode:function(a){if(69==encodeURIComponent('"#$%&+,/:;<=>?@[\\]^`{|}').length)return encodeURIComponent(a);for(var b="",c=0;c<a.length;c++)b+=vx.util.encodeCharLossy(a[c]);return b},encodeCharLossy:function(a){return code=a.charCodeAt(0),"!'()*-._~".indexOf(a)>-1||code>47&&code<58||code>64&&code<91||code>96&&code<123?a:code<128?"%"+code.toString(16).toUpperCase():"_"},log:function(a,b){"object"==typeof console&&"function"==typeof console.log&&(b||!vx.is_prod||vx.force||vx.testing)&&console.log(a)}},rec:function(a){var b="undefined"!=typeof vxx?vxx:"undefined"!=typeof vxi?vxi:"und";a="undefined"!=typeof a?"/event/"+a:"",vx.script.get("//"+vx.vtu+"/rec/uid/"+vx.uid+"/vid/"+b+"/url/"+encodeURIComponent(document.location.href)+"/ref/"+encodeURIComponent(document.referrer)+a)},ui:{init:function(){try{vx.theme=JSON.parse(vxsurvey.theme)}catch(a){}var b=parseInt(vx.cookie.rc("vxl"))||0,c=parseInt(vx.cookie.rc("vxp"))||0,d=parseFloat(vx.cookie.rc("vxr"))||vx.util.rndRng(0,100,2),e=parseInt(vx.cookie.rc("vxs"))||0,f=Math.floor((new Date).getTime()/1e3),g=window.location.href.match(new RegExp(vxsurvey.reg_exp));vx.force="#vxforce"==window.location.hash,vx.testing=/^VOXTESTING\d{12}$/.test(vxsurvey.uuid64),vx.cookie.cc("vxr",d),vx.force&&(window.location.hash="",vx.cookie.ec("vxs"),e=0,d=0,b=0,c=vxsurvey.pages,vxsurvey.wait=0,g=!0),e>0&&e<vxsurvey.components.length&&vx.cookie.cc("vxs",--e,365),g&&d<=parseFloat(vxsurvey.percent)&&(""!=vxsurvey.inspectlet_wid&&e>-1&&(window.__insp=window.__insp||[],__insp.push(["wid",vxsurvey.inspectlet_wid]),vx.script.get("//cdn.inspectlet.com/inspectlet.js","inspsync"),__insp.push(["tagSession",{identify:vx.uid}])),-1!==e&&(0===b||e<vxsurvey.components.length||b+parseInt(vxsurvey.sbetween)<=f)&&c+1>=parseInt(vxsurvey.pages)&&(vx.util.log(d+" <= "+vxsurvey.percent+" = "+(d<=parseFloat(vxsurvey.percent))+" waiting "+vxsurvey.wait+" seconds"),"undefined"!=typeof vxsurvey.on_exit&&"1"==vxsurvey.on_exit?vx.ui.exitSetup():(setTimeout(vx.ui.survey,1e3*vxsurvey.wait),vx.$(window).bind("orientationchange",vx.ui.reorient)))),vx.cookie.cc("vxp",c+1),c+1>=parseInt(vxsurvey.pages)&&vx.cookie.cc("vxl",f,365)},survey:function(a){var b="285px",c="0",d="12px",e=".62em",f="",g="right:0;",h="border-radius:1em 1em 0 0;",i="border-top-left-radius:1em",j="border-top-right-radius:1em",k="",l="#ifv .bghov:hover{"+vx.t("#ifv .bghov:hover","background-color")+" !important}";vx.ui.teardown(),vx.mobile&&vx.ui.viewport(!0),"undefined"!=typeof a&&vx.cookie.cc("vxs",a,365),vx.mobile&&(b=.98*vx.$(window).width()+"px",c=.96*vx.$(window).height()+"px",d="24px",e="0",f="overflow-y:scroll;",h="",i="",j="",l="",g="",k="::-webkit-scrollbar{-webkit-appearance:none}::-webkit-scrollbar:vertical{width:10px}::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.5);border-radius:10px;border:2px solid #fff}::-webkit-scrollbar-track{border-radius:10px;background-color:#fff}"),vx.$("head").append('<style id="vxstyle">#ifv ul li{'+vx.t("#ifv ul li","background-color")+" !important}"+l+k+"</style>"),vx.$("body").append('<div id="ifv" style="'+vx.t("#ifv",["border-color","color","background-color"])+";width:"+b+";height:"+c+";margin:0 "+e+" 0 auto;"+f+h+"font:400 "+d+" helvetica,arial,sans-serif;border-style:solid;border-width:0.2em 0.2em 0;position:fixed;z-index:10000;"+g+'bottom:0;text-align:center;padding-bottom:1em"><div class="t" style="height:1em;width:100%"></div><hr style="border:.09em solid;'+vx.t("hr",["border-color","background-color"])+';width:99%;margin:0"/><div class="bw" style="padding:.5em;text-align:left;"><div class="b" style="height:auto;width:100%">'+vxsurvey.intro+"</div></div></div>"),vx.$("#ifv .t").append(vx.$('<div class="tl bghov" style="line-height:1.5em;float:left;width:10%;cursor:pointer;'+i+'">x</div>').bind("click",function(){vx.cookie.cc("vxs",-1,365),vx.rec("voxclosed"),vx.ui.teardown()})),vx.$("#ifv .t").append('<div style="line-height:1.5em;float:left;width:80%">&nbsp;</div>'),vx.mobile||vx.$("#ifv .t").append(vx.$('<div class="tr bghov" style="line-height:1.5em;float:left;width:10%;cursor:pointer;clear:right;'+j+'">-</div>').bind("click",function(){vx.$("#ifv").animate("0px"==vx.$("#ifv").css("bottom")?{bottom:"-380px"}:{bottom:"0px"})})),vx.ui.next(void 0,void 0,!0)},intro:function(){var a=parseInt(vx.cookie.rc("vxs"))||0,b=JSON.parse(decodeURIComponent(vx.cookie.rc("vxa")))||!1;0!=a&&b||vx.cookie.cc("vxs",0,365),vx.rec("voxstart"),vx.$("#ifv .b").empty(),vx.$("#ifv .b").append('<div class="vxintro">'+vxsurvey.intro+'</div><div class="vxspace">&nbsp;</div>'),"1"==vxsurvey.inc_1st_quest?vx.ui.next(void 0,0==a):(vx.$("#ifv .b").append(vx.$('<input type="button" id="vxstart" name="start" value="Start"/>').bind("click",function(){vx.ui.next()})),vx.ui.dynoHeight())},thanks:function(){vx.$("#ifv .b").empty().append("<div>"+vxsurvey.thank_you+"</div>"),vx.ui.dynoHeight(),vx.cookie.cc("vxs",-1,365);var a=vx.mobile?1500:2500;setTimeout(function(){vx.mobile?vx.$("#ifv").css({display:"none"}):vx.$("#ifv").animate({bottom:"-405px"}),vx.ui.teardown()},a)},subArrow:function(){return'<div class="vxsub" style="float:right;'+vx.t(".vxsub","background-color")+';border-radius:1.5em;display:inline-block;padding:.5em;border-width:.2em;margin-bottom:.3em;cursor:pointer;margin-top:1em"><div style="float:left">'+vxsurvey.submit_text+'&nbsp;</div><div style="float:right;background-color:#fff;color:#000;border-radius:.5em">'+vx.subArr+"</div></div>"},select:function(a,b){var c,d=vx.$("#ifv .b"),e=vx.util.optObj(a.extra.items,a.extra.optrand),f=function(){var b=vx.$(this).is("div.component"),c=b?vx.$(vx.$(this).get(0)).find("input").val():vx.$(this).val();b&&vx.$(vx.$(this).get(0)).find("input").attr("checked","checked"),"vxother"==c?("undefined"==typeof vx.$("#ifv .b #vxother").get(0)&&(vx.$("#ifv #vxotherdiv").append('<textarea name="vxother" id="vxother" style="font-size:1em;height:1.5em;width:90%;margin:.75em 0"></textarea>'),vx.$("#ifv #vxotherdiv").append(vx.$(vx.ui.subArrow()).bind("click",function(){vx.ui.submit(a.cid,vx.$("#ifv .b #vxother").val())})),vx.ui.dynoHeight()),vx.mobile&&vx.$("#ifv").scrollTop(vx.$("#ifv")[0].scrollHeight),vx.$("#ifv .b #vxother").focus()):vx.ui.submit(a.cid,c)},g="change",h="",i="Other...";if(b||d.empty(),d.append('<div class="n" style="font-weight:800;padding-bottom:.5em">'+a.name+"</div>"),a.extra.other_text&&(i=a.extra.other_text),a.extra.aslist){d.append('<div class="component select list" style="text-align:left"><select name="'+a.cid+'"><option disabled selected> -- select an option -- </option>');for(c in e)d.find("select").append('<option value="'+c.replace(/^_/,"")+'">'+e[c]+"</option>");a.extra.other_option&&d.find("select").append('<option value="vxother">'+i+"</option>"),d.append("</select>"),h="#ifv .b select"}else if(a.extra.multiple){for(c in e)d.append(vx.ui.selcomp("checkbox",a.cid+"[]",c,e[c]));a.extra.other_option&&d.append(vx.ui.selcomp("checkbox",a.cid,"vxother",i,"vxotherdiv")),d.find("input:checkbox").click(function(a){a.stopPropagation()}),d.find("div.component.checkbox").bind("click",function(){var a=vx.$(this).find("input");a[0].checked=!a[0].checked}),d.append('<div style="height:2em">'+vx.ui.subArrow()+"</div>"),vx.$("#ifv .b input[value=vxother], #ifv #vxotherdiv").bind("click",function(){"undefined"==typeof vx.$("#ifv .b #vxother").get(0)?(vx.$("#ifv #vxotherdiv").append('<textarea name="vxother" id="vxother" style="font-size:1em;height:1.5em;width:90%;margin:.75em 0"></textarea>'),vx.mobile&&vx.$("#ifv").scrollTop(vx.$("#ifv")[0].scrollHeight),vx.$("#ifv .b #vxother").focus(),vx.ui.dynoHeight()):vx.$("#ifv .b #vxother").remove()}),h="#ifv .b .vxsub",f=function(){var b=vx.$("#ifv .b #vxother"),c=vx.$("#ifv .b input:checkbox:checked").map(function(){return"vxother"!=this.value?this.value:void 0}).get();b.get(0)&&""!=b.val()&&c.push(b.val()),vx.ui.submit(a.cid,c.join())},g="click"}else{g="click";for(c in e)d.append(vx.ui.selcomp("radio",a.cid,c,e[c]));a.extra.other_option&&d.append(vx.ui.selcomp("radio",a.cid,"vxother",i,"vxotherdiv")),h="#ifv .b .component"}vx.$(h).bind(g,f)},selcomp:function(a,b,c,d,e){return"<div"+(e?' id="'+e+'"':"")+' class="component select bghov '+a+'" style="'+vx.t(".component","background-color")+';text-align:left;border-radius:1.5em;padding:.5em;border-width:.2em;margin-bottom:.3em;cursor:pointer"><input style="cursor:pointer;margin-top:0" type="'+a+'" name="'+b+'" value="'+c.replace(/^_/,"")+'"/><label style="margin-left:.4em;padding:0;display:inline-block;width:85%;cursor:pointer;font-weight:100;vertical-align:top">'+d+"</label></div>"},text:function(a,b){var c=vx.$("#ifv .b"),d=3;b||c.empty(),c.append('<div class="n" style="font-weight:800">'+a.name+"</div>"),c.append('<textarea name="'+a.cid+'" id="vxc'+a.cid+'" style="font-size:1em;height:'+d+'em;width:90%;margin:.75em 0"></textarea>'),vx.$("#ifv .b #vxc"+a.cid).focus(),c.append('<div style="height:2em">'+vx.ui.subArrow()+"</div>"),vx.$("#ifv .b .vxsub").bind("click",function(){vx.ui.submit(a.cid,vx.$("#vxc"+a.cid).val())})},grid:function(a,b){var c,d,e=vx.util.optObj(a.extra.options),f=vx.$("#ifv .b");b||f.empty(),d=vx.$('<div class="ulw"><ul style="margin:0 0 .5em;list-style:outside none none;padding:.5em 0 0 0;text-align:center"></ul></div>');for(i in e)c=vx.$('<li class="bghov" style="border-radius:.3em;width:2em;height:2em;line-height:2em;margin:.3em .17em 0 0;font-size:.9em;font-weight:100;cursor:pointer;text-align:center;display:inline-block">'+i.replace(/^_/,"")+"</li>").bind("click",function(){vx.ui.submit(a.cid,vx.$(this).text())}),d.find("ul").append(c);d.append('<div style="clear:both"></div><div><div style="float:left;text-align:left;font-weight:100;">'+e._0+'</div><div style="float:right;text-align:right;font-weight:100">'+e["_"+(Object.keys(e).length-1)]+"</div></div>"),f.append('<div class="n" style="font-weight:800">'+a.name+"</div>"),f.append(d)},comp:function(a,b){var c=vxsurvey.components[a++],d=JSON.parse(decodeURIComponent(vx.cookie.rc("vxa")))||{};vx.cookie.cc("vxs",a,365);var e,f,g,h,i,j,k=!0;for(e in vxsurvey.conditionals)if(c.cid==vxsurvey.conditionals[e].target){k=!("show"==vxsurvey.conditionals[e].action),h=0,j=0;for(f in vxsurvey.conditionals[e].rules)if("undefined"!=typeof d[vxsurvey.conditionals[e].rules[f].source])for(i=d[vxsurvey.conditionals[e].rules[f].source].split(","),g=0;g<i.length;g++)vxsurvey.conditionals[e].rules[f].value==i[g]?h++:j++;"and"==vxsurvey.conditionals[e].andor&&h>0&&0==j?k="show"==vxsurvey.conditionals[e].action:"or"==vxsurvey.conditionals[e].andor&&h>0&&(k="show"==vxsurvey.conditionals[e].action)}k&&vx.util.log(a+" of "+vxsurvey.components.length),k===!1?vx.ui.next():"select"==c.type?vx.ui.select(c,b):c.type.match(/^text/)?vx.ui.text(c,b):"grid"==c.type&&vx.ui.grid(c,b),k&&vx.ui.dynoHeight()},dynoHeight:function(){if(!vx.mobile){var a=40;vx.$("#ifv").children().each(function(){a+=vx.$(this).outerHeight()}),vx.$("#ifv").animate({height:a+"px"})}},next:function(a,b,c){var d=parseInt(vx.cookie.rc("vxs"));vx.mobile&&vx.$("#ifv").animate({scrollTop:0}),isNaN(d)||"undefined"==typeof d||c?vx.ui.intro():d==vxsurvey.components.length?vx.ui.thanks():d<vxsurvey.components.length&&vx.ui.comp(d,b)},submit:function(a,b){var c=JSON.parse(decodeURIComponent(vx.cookie.rc("vxa")))||{};c[a]=b,vx.cookie.cc("vxa",encodeURIComponent(JSON.stringify(c)),365),vx.script.get("//"+vx.vsu+"/submit/uid/"+vx.uid+"/sid/"+vxsurvey.uuid64+"/qid/"+a+"/ans/"+b)},viewport:function(a){vx.mobile&&(a?("undefined"==typeof vx.viewport&&vx.$('meta[name="viewport"]').length>0&&"vxmeta"!=vx.$(vx.$('meta[name="viewport"]').get(0)).attr("id")&&(vx.viewport=vx.$('meta[name="viewport"]').detach()),vx.$("meta#vxmeta").length<1&&vx.$("head").append('<meta id="vxmeta" name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">')):(vx.$("meta#vxmeta").remove(),"undefined"!=typeof vx.viewport&&vx.viewport.length>0?vx.$("head").append(vx.viewport):vx.$('meta[name="viewport"]').attr("content","user-scalable=1,initial-scale=1")))},reorient:function(){vx.mobile&&vx.$("#ifv").length&&setTimeout(function(){vx.ui.survey(parseInt(vx.cookie.rc("vxs"))-1||0)},500)},iPhone6Plus:function(){return/iPhone/.test(navigator.userAgent)&&"undefined"!=typeof devicePixelRatio&&devicePixelRatio>2},teardown:function(){vx.$("#ifv").remove(),vx.ui.viewport(!1),vx.$("style#vxstyle").remove(),vx.$("script.vxscript").remove()},exitSetup:function(){vx.localClick=!1,window.onbeforeunload=vx.ui.exitSurvey,vx.$("a").click(function(){var a=document.createElement("a");a.href=vx.$(this).attr("href"),""==a.host&&(a.href=a.href),a.href.match(new RegExp(vxsurvey.reg_exp))&&(vx.localClick=!0)})},exitSurvey:function(){return vx.localClick?void 0:(vx.ui.survey(),vx.$(window).bind("orientationchange",vx.ui.reorient),vxsurvey.on_exit_text)}},t:function(a,b,c){var d=[];if("undefined"!=typeof vx.theme&&"undefined"!=typeof vx.theme[a]){"string"==typeof b&&(b=[b]);for(var e=0;e<b.length;e++)"undefined"!=typeof vx.theme[a][b[e]]&&d.push(c?vx.theme[a][b[e]]:b[e]+":"+vx.theme[a][b[e]])}return d.join(";")}}.init();vx.run();var vxnext=vx.ui.next,vxnada=function(){};
//# sourceMappingURL=//j.ifvox.dev/vox.js.map
